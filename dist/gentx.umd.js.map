{"version":3,"file":"gentx.umd.js","sources":["../src/utils.js","../src/guards/log.js","../src/source.js","../src/flow.js","../src/tools/react.js","../src/tools/vue.js"],"sourcesContent":["// if condition is false, throw message \nexport function invariant(condition, message) {\n  if (condition) return;\n  throw new Error(message);\n}\n\n// log\nexport function log(...args) {\n  if (process.env.NODE_ENV !== 'production') {\n    console.log(...args);\n  };\n}\n\n// catch error\nexport function catchError(fn) {\n  return function(...args) {\n    try {\n      return fn.bind(this)(...args);\n    } catch (e) {\n      console.log('uncaught exception:', e);\n      throw e;\n    }\n  }\n}","import { map } from 'rxjs/operators';\nimport { log } from '../utils';\n\nexport function logGuard(input, opts={}) {\n  let {flowName, groupName, guardType} = opts;\n\n  // not use as a middleware\n  if (!guardType) return input;\n\n  let typeMsg = { before: 'in', after: 'out' }[guardType];\n\n  return input.pipe(\n    map(value => {\n      let logData;\n      \n      try {\n        logData = JSON.parse(JSON.stringify(value));\n      } catch(e) {\n        logData = e.message;\n      }\n\n      log(`[gentx log] ~ flow ${typeMsg} <${groupName}>.<${flowName}>:`, logData);\n\n      return value;\n    })\n  );\n}\n","import { Observable, from } from 'rxjs';\n\n// create observable from a `observable input` and a `cancel function`\nexport function makeObservable(input, cancel) {\n  let observable = from(input);\n  return Observable.create(observer => {\n    let subscription = observable.subscribe(observer);\n    return function unsubscribe() {\n      if (typeof cancel === 'function') cancel();\n      subscription.unsubscribe();\n    }\n  });\n}","import { concatMap, mergeMap, switchMap } from 'rxjs/operators';\n\n// concatMap source to flow\nexport function concatMapSource(source) {\n  return (input) => {\n    return input.pipe(\n      concatMap((value) => source(value))\n    );\n  };\n}\n\n// mergeMap source to flow\nexport function mergeMapSource(source) {\n  return (input) => {\n    return input.pipe(\n      mergeMap((value) => source(value))\n    );\n  };\n}\n\n// switchMap source to flow\nexport function switchMapSource(source) {\n  return (input) => {\n    return input.pipe(\n      switchMap((value) => source(value))\n    );\n  };\n}\n\n// create a flows group\nexport function groupFlows(flowMap={}, opts={}) {\n  const {\n    groupName= 'Anonymous',\n    beforeGuards= [],\n    afterGuards= []\n  } = opts;\n  const flows = {};\n\n  Object.keys(flowMap).forEach(key => {\n    const originFlow = flowMap[key];\n    // before middlewares\n    const befores = beforeGuards.map(guard => {\n      return (input, opts={}) => {\n        return guard(input, { \n          ...opts,\n          guardType: 'before',  \n          flowName: key,\n          groupName: groupName\n        });\n      }\n    });\n    // after middlewares\n    const afters = afterGuards.map(guard => {\n      return (input, opts={}) => {\n        return guard(input, { \n          ...opts,\n          guardType: 'after',  \n          flowName: key,\n          groupName: groupName\n        });\n      }\n    });\n    // concat middlewares with flow\n    const fns = befores.concat(originFlow).concat(afters);\n    // generate flow\n    const flow = function flow(input, opts={}) {\n      return fns.reduce((prev, currFn) => currFn(prev, opts), input);\n    }\n\n    flows[key] = flow;\n  });\n\n  return flows;\n}\n\n// create flow from source\nexport function flowSource(source, operatorType='concatMap') {\n  let operator = {\n    'concatMap': concatMapSource,\n    'mergeMap': mergeMapSource,\n    'switchMap': switchMapSource\n  }[operatorType];\n\n  if (!operator) {\n    throw new Error(`[gentx error] operatorType must in ['concatMap', 'mergeMap', 'switchMap'], but get <${operatorType}> when flowSource <${source.name}>.`)\n  }\n\n  return operator(source);\n}\n\n// crate flows from sources\nexport function flowSources(sourceMap, operatorType='concatMap') {\n  const flows = {};\n\n  Object.keys(sourceMap).forEach(key => {\n    let source = sourceMap[key];\n    flows[key] = flowSource(source, operatorType);\n  });\n\n  return flows;\n}","export function gentx(opts={}) {\n  let conf = {\n    $bindSub: '$bindSub',\n    $unsubscribe: '$unsubscribe',\n  }\n\n  function gentxDecorator(target) {\n    target.prototype['_gentx_subs_'] = {};\n\n    // bind sub\n    target.prototype[conf.$bindSub] = function(sub, name='anonymous', removePrevious=true) {\n      const vm = this;\n      const subs = vm['_gentx_subs_'];\n      \n      // remove previous\n      if (name != 'anonymous' && removePrevious) \n        this[conf.$unsubscribe](name);  \n      \n      // bind sub\n      if (!subs[name]) subs[name] = [];\n      subs[name].push(sub);\n    }\n\n    // unsubscribe\n    target.prototype[conf.$unsubscribe] = function(ns) {\n      const vm = this;\n      const subs = vm['_gentx_subs_'];\n  \n      try {\n        // unsubscribe one\n        if (ns && subs[ns] && subs[ns].length) {\n          subs[ns].forEach(sub => {\n            if (sub && typeof sub.unsubscribe === 'function') {\n              sub.unsubscribe();\n            }\n          });\n          delete subs[ns];\n          return;\n        }\n  \n        // unsubscribe all\n        Object.keys(subs).forEach(ns => {\n          if (subs[ns] && subs[ns].length) {\n            subs[ns].forEach(sub => {\n              if (sub && typeof sub.unsubscribe === 'function') {\n                sub.unsubscribe();\n              }\n            });\n            delete subs[ns];\n            return;\n          }\n        });\n      } catch(e) {\n        console.log(e);\n      }\n    }\n\n    // componentWillUnMount\n    target.prototype._gentx_componentWillUnMount_ = target.prototype.componentWillUnMount;\n    target.prototype.componentWillUnMount = function() {\n      this[conf.$unsubscribe]();\n      this._gentx_componentWillUnMount_();\n    }\n  }\n\n  // @gentx: opts is React.Component\n  if (typeof opts === 'function' && typeof opts.prototype === 'object') {\n    return gentxDecorator(opts);\n  }\n\n  // @gentx({})\n  conf = { ...conf, ...opts };\n  return gentxDecorator;\n}\n","const VueGentX = {};\n\nVueGentX.install = function(Vue, options={}) {\n  let {\n    $bindSub= '$bindSub',\n    $unsubscribe= '$unsubscribe'\n  } = options;\n\n  // bind sub\n  Vue.prototype[$bindSub] = function(sub, name='anonymous', removePrevious=true) {\n    const vm = this;\n    const subs = vm['_gentx_subs_'];\n\n    // remove previous\n    if (name != 'anonymous' && removePrevious) \n      this[$unsubscribe](name);  \n    \n    // bind sub\n    if (!subs[name]) subs[name] = [];\n    subs[name].push(sub);\n  }\n\n  // unsubscribe\n  Vue.prototype[$unsubscribe] = function(ns) {\n    const vm = this;\n    const subs = vm['_gentx_subs_'];\n\n    try {\n      // unsubscribe one\n      if (ns && subs[ns] && subs[ns].length) {\n        subs[ns].forEach(sub => {\n          if (sub && typeof sub.unsubscribe === 'function') {\n            sub.unsubscribe();\n          }\n        });\n        delete subs[ns];\n        return;\n      }\n\n      // unsubscribe all\n      Object.keys(subs).forEach(ns => {\n        if (subs[ns] && subs[ns].length) {\n          subs[ns].forEach(sub => {\n            if (sub && typeof sub.unsubscribe === 'function') {\n              sub.unsubscribe();\n            }\n          });\n          delete subs[ns];\n          return;\n        }\n      });\n    } catch(e) {\n      console.log(e);\n    }\n  }\n\n  // mixin\n  Vue.mixin({\n    beforeCreate() {\n      this._gentx_subs_ = {};\n    },\n    beforeDestroy() {\n      this[$unsubscribe]();\n    }\n  });\n}\n\nexport { VueGentX };\n"],"names":["log","process","env","NODE_ENV","console","catchError","fn","bind","e","logGuard","input","opts","flowName","groupName","guardType","typeMsg","before","after","pipe","map","value","logData","JSON","parse","stringify","message","makeObservable","cancel","observable","from","Observable","create","observer","subscription","subscribe","unsubscribe","concatMapSource","source","concatMap","mergeMapSource","mergeMap","switchMapSource","switchMap","groupFlows","flowMap","beforeGuards","afterGuards","flows","Object","keys","forEach","key","originFlow","befores","guard","afters","fns","concat","flow","reduce","prev","currFn","flowSource","operatorType","operator","Error","name","flowSources","sourceMap","gentx","conf","$bindSub","$unsubscribe","gentxDecorator","target","prototype","sub","removePrevious","vm","subs","push","ns","length","_gentx_componentWillUnMount_","componentWillUnMount","VueGentX","install","Vue","options","mixin","beforeCreate","_gentx_subs_","beforeDestroy"],"mappings":"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"}